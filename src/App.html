
<div class='clock'>
    <Clock time={curr_time}/>
</div>
<div class='calendar'>
    <Calendar td_date={td_date} td_dow={td_dow}/>
</div>

<script>
    import Calendar from './Calendar.html';
    import Clock from './Clock.html';
    import 'whatwg-fetch';

    export default {
        components : { Calendar, Clock },
        oncreate() {
            var urly = window.location.href;
            var conf = {
                method: "GET",
                cache: "no-cache",
            }
            fetch(urly, conf)
                .then(res => {
                    var date = new Date(res.headers.get('Date'));
                    var local_date = new Date(date.valueOf() + 210 * 60 * 1000);  // UTC+3:30
                    var state = {
                        curr_time: local_date,
                        td_dow: (local_date.getUTCDay() + 1) % 7,
                        td_date: local_date.getUTCDate()
                    };
                    this.set(state)
                    console.log("App state is: ", state)
                })
        },
        data() {
            return {
                curr_time: new Date(0),
                td_date: 23,
                td_dow: 5,
            }
        }
    }
</script>

<style>
    .clock {
        align-content: center;
        text-align: center;
        float: right;
        margin: 0 auto;
        width: 20%;
    }

    .calendar {
        background-color: rgb(255, 255, 255);
        float: right;
        width: 40%;
        align-content: center;
        text-align: center;
        margin: 0 auto;
    }
    
    @media screen and (max-width: 400px) {
        .calendar {
            width: 100%;
        }
        .clock {
            width: 50%;
            padding-left: 25%;
            padding-right: 25%;
        }
    }
</style>